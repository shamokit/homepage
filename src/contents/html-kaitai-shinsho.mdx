---
title: 'HTML解体新書を読んだ感想'
date: '2022-11-28'
dateModified: '2022-11-28'
tags: [20]
category: 'books'
private: false
isbn: '978-4-86246-527-6'
description: 'HTML解体新書を読んだ感想'
---

## アクセシビリティ対策、やってみた

まずはlighthouseで100点を取るところを目指しました。
すでにちょっと辛かったですが、これでも30%くらいしかチェックできてないらしいです。

人の目でのチェックが必要です。


### 辛かったこと
カラーコントラストでAAAをとろうと思うとかなりキツイ…。
[便利なチェックツール](https://webaim.org/resources/contrastchecker/)

実際社内アプリでチェックしてみましたが、目に優しいカラーを使っていたのでテキストにメインカラーを使うとAも取れませんでした。
緑と黄色は結構きついです。

テキストに使う色と背景に使う色は別で決めておいたほうがよさそう。

## Webサイトでのアクセシビリティ
まずは正しくマークアップする。
リンクは```a```タグ、ボタンは```button```タグ、トグルは```details```タグなど。

メインナビゲーションは```nav```タグ、ヘッダーは```header```タグ、メインコンテンツは```main```タグなど、HTML5への移行で出てきたタグを使って適切にマークアップしていれば```aria-label```などもそんなに多くは必要ありません。

むしろ何でもかんでもariaをつけようとすると間違ってaria-属性を使ってしまったりするので、間違って使っていないかどうか注意が必要です。

```nav```タグが複数あるような場合はそれが何なのかをaria-labelでつけてあげると親切。
ただし、```nav```タグを使いすぎると逆に区別が難しくなったりスクリーンリーダーでの操作がややこしくなったりするので、メインナビゲーションくらいにとどめておいたほうがよさそうです。

逆にスクリーンリーダーでそこにジャンプしたいような場合は```nav```でマークアップするとよい。

### aria-label
```button```タグ内にSVGアイコンが一個だけあるようなやつで使うといい感じです。
```aria-label```を使う方法もありますが、```sr-only```みたいなクラスで隠しテキストを用意するのもありです。

UI的にはテキストが見えていたほうがいいですが、そうはいってもデザインを変更できなかったりする場合もあるので、そういう場合は```aria-label```を使ってスクリーンリーダーユーザー向けにテキストを用意するといいです。

もちろんホバーやフォーカスでツールチップを表示したり、青眼のユーザー向けにもテキストは用意したほうが良いです。

### aria-pressed
だいたいbuttonタグにつかいます。
トグルがONなのかOFFなのかをスクリーンリーダーに伝えることができます。

[https://developer.mozilla.org/ja/docs/Web/Accessibility/ARIA/Roles/button_role#%E9%96%A2%E9%80%A3%E3%81%99%E3%82%8B_wai-aria_%E3%81%AE%E3%83%AD%E3%83%BC%E3%83%AB%E3%80%81%E3%82%B9%E3%83%86%E3%83%BC%E3%83%88%E3%80%81%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3](https://developer.mozilla.org/ja/docs/Web/Accessibility/ARIA/Roles/button_role#%E9%96%A2%E9%80%A3%E3%81%99%E3%82%8B_wai-aria_%E3%81%AE%E3%83%AD%E3%83%BC%E3%83%AB%E3%80%81%E3%82%B9%E3%83%86%E3%83%BC%E3%83%88%E3%80%81%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3)

### aria-expanded
メニューなどが開いているか閉じているかをスクリーンリーダーに伝えることができます。

ctrl+Fで検索できるので、detailsタグを基本使ったほうがいいです。

### aria-current
page,step,locationあたりを使うと思います。
パンくずでまず使うといいです。

余談ですが、```NuxtLink```では今見ているページのリンクには```aria-current="page"```が自動でつきます。

[https://developer.mozilla.org/en-US/docs/Web/API/Element/ariaCurrent](https://developer.mozilla.org/en-US/docs/Web/API/Element/ariaCurrent)

### その他のaria
本の最後に事例がたくさん載っているので買って読んでみてください。
僕はここに付箋が大量につきました笑

### viewport
```maximum-scale=1.0 user-scalable=no```
こういうのはやらない。

## タグ
### section
見出しとコンテンツがある部分は```article```もしくは```section```で囲ってマークアップするとソースがすごく見やすくなるので個人的には必ず囲っています。

VueとかReactとかを使っていればセクションごとに別コンポーネントにできるのでそれでもOKですが、検証ツールで見るときに```section```で閉じられているとソースを追うのが早くなるので個人的におすすめです。

```article```タグとの切り分けはなかなか判断が難しいが、そのセクションだけを読んでも成立している場合は```article```でOKという認識です。

記事詳細ページなどは```article```タグで必ず囲っています。

記事のリストについては```article```タグと見出しタグでマークアップしてOKですが、個人的には記事タイトルと日付だけのコンテンツが```article```かといわれるとちょっと微妙では？と思うので```ul>li```でマークアップしています。

### 見出しタグ
```aria-level```属性を使うと見出しレベルを変更できる。
あんまり使うことはなさそう。普通に見出しタグを変更でOK。

``` html
<p role="heading" aria-level="2">見出し2</p>
```

一応こうやれば見出しを作れるかも…。

### fieldset
フォームのパーツをグルーピング化します。
[https://developer.mozilla.org/ja/docs/Web/HTML/Element/fieldset](https://developer.mozilla.org/ja/docs/Web/HTML/Element/fieldset)

長いフォームなどで見出しとそれに関する項目がセットになっていることは多いと思います。
発送先、送り元　とかのグルーピングなどですね。disabled属性をつけるとそこはフォームで送信されないので便利です。
[https://waic.jp/docs/as/tests/201205/A/HTMLandXHTML/H71-4.html](https://waic.jp/docs/as/tests/201205/A/HTMLandXHTML/H71-4.html)

見出しタグでマークアップするのもいいですが、fieldsetで囲って見出しの代わりにlegend要素を使いましょう。

ちょっとドヤれるタグな気がします。僕は知りませんでしたが、以下の本で学びました。
フォーム関連のタグはアクセシビリティ対応時いろいろできますが、```<data value="978-4-86246-451-4">Form Design Patterns</data>```という本がめちゃくちゃいいのでお勧めしておきます。
黄色の本です。

アクセシビリティをやるならまずこれを買うといいと僕は思っています。
後は```<data value="978-4-86246-527-6">HTML解体新書</data>```ですね。

### address
住所用？と思うが、実は記事の著者の電話番号やSNSのアドレスなど、連絡先ならなんでも入れられる。

```aritcle```タグの中で使えばその```article```の連絡先になるが、そうでない場合はそのページ全体への連絡先になってしまうので使いすぎには注意。

### hr
テーマの区切りに使用する。

見出しが出てくるなら```section```で囲えばいいので、使う場所はWebサイト制作ではあまりなさそう。
ボーダーを引きたいので…という用途で使うのはNG。

スクリーンリーダーによっては```hr```の区切りにジャンプできるものもあるらしい？
ここに飛びたいかも　という箇所があれば使ってもよさそうだが、そういう部分は大体見出しタグがある気がするのでやっぱり使いどころは少ないです。

社長からのメッセージみたいなセクションがあれば長いことも多いので使うかも。
偉い人の話は長い。

### blockquote,cite,data
```cite```タグで引用元を明示します。
ここだけの話、ちょっと前までsiteだと思っていました笑

```cite```タグは作品のタイトルを表すので、blockquoteの中で出てきた本のタイトルなどに使用できます。

```data```タグを使用すると、指定したデータをマシンリーダブルにできます。
``` html
<data value="978-4-86246-527-6">HTML解体新書</data>
```
こんな感じですね。

[MDNでの例](https://developer.mozilla.org/ja/docs/Web/HTML/Element/data)
商品番号をつけたりとかするといいっぽい。

SEO的な対応をするのであれば
[商品の構造化マークアップ](https://developers.google.com/search/docs/appearance/structured-data/product?hl=ja)をやったほうがよさそうです。

### dl,dt,dd
html5以前では定義リストだった気がしますが、今は説明リストとして使えます。

ただし見出しタグのようにジャンプできる機能はないし、ロールもまた変わるみたいなので多用するのはちょっと慎重になったほうがいいかもです。

### figure
自己完結型のコンテンツに使用します。

このタグは個人的には「文章内に出てきた画像がそれだけで完結しているかの判断」が微妙に難しいと思っています。

図とキャプション、写真とその説明などは間違いなく```figure```と```figcaption```でいいと思いますが、画像ならなんでも```figure```で囲っといたらいいというわけではないので注意が必要です。

### main
当たり前ですが一ページに一つしか置けません。
ただし、```hidden```属性のついた```main```タグは複数おけるようです。

jsでコンテンツを切り替える系のやつかと思いますが、あんまりやらない気がします。

スクリーンリーダーユーザーは```main```タグにジャンプできるので、メインコンテンツには必ず使用しましょう。
IEが生きていた時代は安全策として念のため```role="main"```を記述していましたが、今はもう不要です。

### small
補足説明、著作権表示、免責事項、法的な注意書きなどに使えるようです。

Webサイトだとフッターのコピーライトに使えますね。
うちはコピーライト以外には使ってません。

ちなみにコピーライトは別に書かなくてもいいのですが、各場合は最低限

- ©️（必須）
- 年号-年号（何年発行何年更新）
- 名前（誰のもの）

があればいいみたいです。
ちなみにUTF-8なら```&copy;```とかかなくていいです。

### del,s
#### del
編集によって削除しましたよ、訂正しましたよ　という部分に使用します。
ブログに間違った情報を載せていて修正する場合はこれですね。

#### s
もう正しくないよ　という部分に使用します。
値下げしました　みたいなときに使用します。

### var
本文内に変数Tが出てくるみたいな部分で
``` html
<p>型変数<var>T</var>、<var>U</var>を使ってうんちゃらかんちゃら</p>
```
って感じで使えます。
個人ブログで大活躍しそう（しらんけど）。

### mark
引用文の一部の強調、検索した文言のハイライト（強調）に使用するようです。
稀によく使いますね。

### caption
```table```の子要素として使用します。

デザイン上これがないことも多い気がしますが、あったほうがいいのでエンジニア側から提案するとよさそうです。
スクリーンリーダーでも読まれるみたいですね。

## 属性

### hidden
これをつけるとスクリーンリーダーからも読み上げられなくなります。

### hreflang
リンク先の言語を表す属性。

[参考サイト](https://developers.google.com/search/docs/specialty/international/localized-versions?hl=ja)

多言語サイトのmeta周り（alternate）の設定、結構知らない人多いですよね。
うちだけかもしれないですが…

### role tablist
タブやで！と伝えることができます。
通常のマークアップではこれを伝えられないので、この属性はタブ切り替え実装では必須ですね。

### rel help
これは明日から使えそうですね。

Webサービスとかだとヘルプページへのリンクを貼ることも多いと思いますが、```a```タグに```rel="help"```
を使用することで、リンク先がヘルプ情報であることを伝えられます。

アイコンと一緒にコンポーネント化してもいいかもですね。

### rel dns-prefetch, preconnect, prefetch
速度改善やUXの向上に使用できる属性です。

googlefontの読込とかで```preconnect```が使われていますね。

### role grid
カレンダーコンポーネントなどで使用すると、テーブルのロールを上書きして操作可能なユーザーインターフェースとすることができます。

[MUI](https://mui.com/x/react-date-pickers/date-range-picker/)
ちゃんと```role="grid"```が指定されてますね。さすが。

### scope
```th```に```scope```属性を使用すると、その見出しが行列どの方向への見出しなのかを指定できます。

うちは暗黙の了解でつけることになっていますが、そういえばコーディング規約に入れ忘れていたのでそのうち入れます。
本を見返すと再発見があるのでいいですね。本は2回以上読みましょう！

### autocomplete
皆さん1度は引っかかったことがあるのではないでしょうか。

```input type="password"```では無視されます。
```name```属性に```new-password```などと指定するといいです。

[autocompleteされるname](https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofilling-form-controls:-the-autocomplete-attribute)


## 構造化マークアップ
やろうと思えばきりがないやつです。

うちではヘッダーフッターナビゲーションパンくず周りを構造化マークアップしています。

Webサイト制作会社でここまでやっているところは少ない気がします。
商品とかFAQとかお問い合わせページとかいろいろできるのでやってみるといいと思います。

[構造化マークアップ参考](https://developers.google.com/search/docs/appearance/structured-data/intro-structured-data?hl=ja)
おすすめは```application/ld+json```形式です。

ライブラリ
- react-schemaorg
- schema-dts
